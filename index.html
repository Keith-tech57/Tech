<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Keith API Hub</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(135deg, #000000, #001f3f, #00bfff);
    color: #fff;
    min-height: 100vh;
}
header {
    text-align: center;
    padding: 2rem;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(5px);
}
header h1 {
    font-size: 2.8rem;
    color: #00bfff;
    text-shadow: 0 0 10px rgba(0,191,255,0.7);
}
.system-info {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-top: 1rem;
    flex-wrap: wrap;
    font-size: 1rem;
    color: #a0e9fd;
}
.system-info div { display: flex; align-items: center; gap: 0.5rem; }
.container {
    padding: 2rem;
}
section {
    margin-bottom: 3rem;
}
h2 {
    color: #00ffe0;
    margin-bottom: 1rem;
    text-shadow: 0 0 5px rgba(0,255,224,0.5);
}
.card-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    justify-content: center;
}
.card {
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    width: 280px;
    padding: 1.5rem;
    text-align: center;
    transition: 0.3s;
    box-shadow: 0 4px 30px rgba(0,0,0,0.5);
}
.card:hover { transform: translateY(-5px); box-shadow: 0 8px 40px rgba(0,0,0,0.7); }
.card img.logo { width: 45px; height: 45px; margin-bottom: 1rem; }
.card p { font-size: 0.9rem; color: #a0e9fd; margin-bottom: 1rem; }
input.api-input {
    width: 100%; padding: 0.6rem; border-radius: 8px; border: none;
    margin-bottom: 0.7rem; text-align: center; font-size: 0.9rem;
}
button {
    padding: 0.4rem 1rem; border: none; border-radius: 8px; background: #00bfff;
    color: #000; cursor: pointer; margin: 0.2rem; font-weight: bold; transition: 0.3s;
}
button:hover { background: #0072ff; color: #fff; }
.response {
    margin-top: 0.5rem; background: rgba(0,0,0,0.3);
    padding: 0.5rem; border-radius: 8px; word-break: break-word;
    max-height: 120px; overflow-y: auto; font-size: 0.8rem;
}
/* AI Table */
.api-table {
    width: 100%; border-collapse: collapse; margin-top: 1rem;
}
.api-table th, .api-table td {
    border: 1px solid rgba(255,255,255,0.2);
    padding: 0.8rem;
    text-align: left;
    font-size: 0.9rem;
}
.api-table th { background: rgba(0,0,0,0.5); color: #00ffe0; }
.status.active { color: #00ff88; font-weight: bold; }
.status.inactive { color: #ff4d4d; font-weight: bold; }
.try-btn {
    background: #00bfff; color: #000; padding: 0.3rem 0.7rem;
    border-radius: 6px; text-decoration: none; font-weight: bold;
}
.try-btn:hover { background: #0072ff; color: #fff; }
footer {
    text-align: center; padding: 1.5rem;
    background: rgba(0,0,0,0.3); color: #00bfff; margin-top: 2rem;
}
</style>
</head>
<body>
<header>
    <h1>Keith API Hub</h1>
    <div class="system-info">
        <div><img id="dateIcon" src="https://img.icons8.com/ios-filled/50/00bfff/calendar.png" width="20"/> <span id="currentDate"></span></div>
        <div><img id="batteryIcon" src="https://img.icons8.com/ios-filled/50/00bfff/battery-level.png" width="20"/> <span id="batteryLevel">--%</span></div>
        <div><img src="https://img.icons8.com/ios-filled/50/00bfff/ip-address.png" width="20"/> <span id="ipAddress">Loading...</span></div>
    </div>
</header>

<div class="container">
    <!-- AI Section -->
    <section id="ai-section">
        <h2>AI APIs (<span id="ai-count">0 endpoints</span>)</h2>
        <table class="api-table" id="ai-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>Status</th>
                    <th>Try</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <p>Total AI Endpoints: <span id="total-endpoints">0</span></p>
    </section>

    <!-- FUN Section -->
    <section id="fun-section">
        <h2>Fun APIs</h2>
        <div class="card-grid" id="fun-container"></div>
    </section>

    <!-- DOWNLOAD Section -->
    <section id="download-section">
        <h2>Download APIs</h2>
        <div class="card-grid" id="download-container"></div>
    </section>

    <!-- RANDOM Section -->
    <section id="random-section">
        <h2>Random APIs</h2>
        <div class="card-grid" id="random-container"></div>
    </section>
</div>

<footer>KEITH TECH</footer>

<script>
// Date
document.getElementById('currentDate').innerText = new Date().toLocaleDateString();

// Battery
const batteryIcon = document.getElementById('batteryIcon');
if (navigator.getBattery) {
    navigator.getBattery().then(battery => {
        updateBattery(battery.level);
        battery.addEventListener('levelchange', () => updateBattery(battery.level));
    });
}
function updateBattery(level) {
    const percent = Math.round(level * 100) + '%';
    document.getElementById('batteryLevel').innerText = percent;
    if (level > 0.75) batteryIcon.src = 'https://img.icons8.com/ios-filled/50/00bfff/battery-full.png';
    else if (level > 0.5) batteryIcon.src = 'https://img.icons8.com/ios-filled/50/00bfff/battery-three-quarters.png';
    else if (level > 0.25) batteryIcon.src = 'https://img.icons8.com/ios-filled/50/00bfff/battery-half.png';
    else batteryIcon.src = 'https://img.icons8.com/ios-filled/50/00bfff/battery-low.png';
}

// IP Address
fetch('https://api.ipify.org?format=json')
.then(res => res.json())
.then(data => document.getElementById('ipAddress').innerText = data.ip)
.catch(() => document.getElementById('ipAddress').innerText = 'N/A');

// ---------------- AI Endpoints Table ----------------
const JSON_URL = "https://raw.githubusercontent.com/Keithkeizzah/INFO/refs/heads/main/Apis/ai.json";

async function fetchEndpoints() {
    try {
        const response = await fetch(JSON_URL);
        if (!response.ok) throw new Error("Failed to fetch endpoints");
        const data = await response.json();
        return data.endpoints;
    } catch (error) {
        console.error("Error:", error);
        return [];
    }
}

async function renderEndpoints() {
    const endpoints = await fetchEndpoints();
    const tableBody = document.querySelector("#ai-table tbody");
    
    document.getElementById("total-endpoints").textContent = endpoints.length;
    document.getElementById("ai-count").textContent = `${endpoints.length} endpoints`;

    endpoints.forEach((endpoint, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${index + 1}</td>
            <td class="endpoint-name">${endpoint.name}</td>
            <td>${endpoint.description}</td>
            <td><span class="status">checking...</span></td>
            <td><a href="${window.location.origin}${endpoint.url}" class="try-btn" target="_blank">Try</a></td>
        `;
        tableBody.appendChild(row);

        // Check endpoint status
        fetch(window.location.origin + endpoint.url)
            .then(response => {
                const statusEl = row.querySelector(".status");
                if (response.ok) {
                    statusEl.textContent = "active";
                    statusEl.className = "status active";
                } else {
                    statusEl.textContent = "inactive";
                    statusEl.className = "status inactive";
                }
            })
            .catch(() => {
                const statusEl = row.querySelector(".status");
                statusEl.textContent = "inactive";
                statusEl.className = "status inactive";
            });
    });
}
document.addEventListener('DOMContentLoaded', renderEndpoints);

// ---------------- Other Categories ----------------
const categories = [
    { id: 'fun-container', json: 'https://raw.githubusercontent.com/Keithkeizzah/INFO/main/Apis/fun.json' },
    { id: 'download-container', json: 'https://raw.githubusercontent.com/Keithkeizzah/INFO/main/Apis/download.json' },
    { id: 'random-container', json: 'https://raw.githubusercontent.com/Keithkeizzah/INFO/main/Apis/random.json' }
];

categories.forEach(cat => {
    fetch(cat.json)
    .then(res => res.json())
    .then(data => {
        const container = document.getElementById(cat.id);
        data.forEach(api => {
            const card = document.createElement('div');
            card.classList.add('card');
            card.innerHTML = `
                <img class="logo" src="https://img.icons8.com/ios-filled/50/00bfff/api.png"/>
                <h3>${api.name}</h3>
                <p>${api.description}</p>
                <input class="api-input" type="text" value="${window.location.origin}${api.url || api.path}" readonly/>
                <button onclick="copyAPI(this)">Copy API</button>
                <button onclick="testAPI(this)">Test API</button>
                <div class="response"></div>
            `;
            container.appendChild(card);
        });
    });
});

// Copy
function copyAPI(button) {
    const input = button.parentElement.querySelector('.api-input');
    input.select(); input.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(input.value);
    alert("API Copied: " + input.value);
}
// Test
async function testAPI(button) {
    const input = button.parentElement.querySelector('.api-input');
    const responseDiv = button.parentElement.querySelector('.response');
    responseDiv.innerHTML = "Loading...";
    try {
        const res = await fetch(input.value);
        const data = await res.text();
        responseDiv.innerHTML = `<pre>${data}</pre>`;
    } catch (err) {
        responseDiv.innerHTML = "Error: " + err.message;
    }
}
</script>
</body>
</html>
